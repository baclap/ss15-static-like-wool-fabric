<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../result-bar/result-bar.html">

<polymer-element name="movie-card" attributes="movie_title movie_poster movie_id">
    <template>
        <link rel="stylesheet" href="../../styles/movie-card.css">
        <div id="movie-box" layout horizontal>
            <img id ="poster" src="{{movie_poster}}" width="54" height="80" alt="{{title}}" />
            <div flex layout vertical>
                <div id="title" flex layout horizontal top>{{movie_title}}</div>
                <div id="result-wrap" layout horizontal center center-justified>
                    <result-bar stay="75" leave="25"></result-bar>
                </div>
            </div>
        </div>
        <div id="vote-box" class="{{vote_choice}}" layout horizontal>
            <div id="vote-stay" on-click="{{voteStay}}" flex>Stay</div>
            <div id="vote-leave" on-click="{{voteLeave}}" flex>Leave</div>
        </div>
    </template>
    <script>
        (function () {
            Polymer('movie-card', {
                movie_title: null,
                movie_poster: null,
                vote_choice: null,
                ready: function() {
                    console.log("movie-card ready");
                },
                voteStay: function() {
                    if (this.vote_choice != "stay") {
                        this.vote_choice = "stay";
                    } else {
                        this.vote_choice = null;
                    }
                    console.log("vote to stay");
                },
                voteLeave: function() {
                    if (this.vote_choice != "leave") {
                        this.vote_choice = "leave";
                    } else {
                        this.vote_choice = null;
                    }
                    console.log("vote to leave");
                }
            });
        })();
    </script>
</polymer-element>